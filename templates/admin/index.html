{% extends 'temp/index.html' %}

{% block body %}
<script>
    $(document).ready(function () {
        
        $("#search-input").on("keyup", function () {
            var searchTerm = $(this).val().toLowerCase();
            $("#data-table tbody tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(searchTerm) > -1);
            });
        });

        $("#search-input").on("keyup", function () {
            var searchTerm = $(this).val().toLowerCase();
            $("#data-table tbody tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(searchTerm) > -1);
            });
        });

        $('.f-d').on('click', function (e) {
            e.preventDefault();
            const filterType = $(this).data('filter-type');
            const filterValue = $(this).data('filter-value');
            filterData(filterType, filterValue);
        });

        function filterData(filterType, filterValue) {
            $('#data-table tbody tr').hide();

            if (filterType === 'status' && filterValue !== 'all') {
                $(`#data-table tbody tr td:nth-child(5) div[status="${filterValue}"]`).each(function () {
                    $(this).closest('tr').show();
                });
            } else if (filterType === 'jenis' && filterValue !== 'all') {
                $(`#data-table tbody tr td[jenis="${filterValue}"]`).each(function () {
                    $(this).closest('tr').show();
                });
            } else if (filterType === 'all') {
                $('#data-table tbody tr').show();
            }
        }


    });
    var messages = {{ get_flashed_messages() | tojson | safe
    }};

    if (messages.length > 0) {
        alert(messages.join('\n'));
    };
</script>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-2">
            <div class="card" style="position: sticky;top: 0;">
                <div class="card-body">
                    <nav class="navbar navbar-expand-lg">
                        <img class="l-sm" src="{{ url_for('static', filename='assets/imgs/learningx.png')}}"
                            width="120">
                        <button class="btn-lx navbar-toggler" type="button" data-bs-toggle="collapse"
                            data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                            aria-label="Toggle navigation">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" fill="currentColor" class="bi bi-list"
                                viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                    d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                            </svg>
                        </button>

                        <div class="collapse navbar-collapse" id="navbarNav">

                            <ul class="navbar-nav flex-column">
                                <img class="l-lg" src="{{ url_for('static', filename='assets/imgs/learningx.png')}}"
                                    width="120">
                                <br>
                                <div class="ps-3" style="border-left: 2px solid red;">
                                    <li class="nav-item">
                                        <a class="nav-link {% if page == 'Dashboard' %} nav-lx {% endif %}"
                                            href="{{ url_for('main.dashboard', key=key) }}">Dashboard</a>
                                    </li>
                                    <li class="nav-item">
                                        <a style="font-size: 10pt;"
                                            class="nav-link {% if page == 'Analisis' %} nav-lx {% endif %}"
                                            href="{{ url_for('main.analisis', key=key) }}">Analisis</a>
                                    </li>
                                    <hr>
                                    <li class="nav-item">
                                        <a style="font-size: 10pt;" class="nav-link" href="/logout">Log Out</a>
                                    </li>
                                </div>
                            </ul>
                        </div>
                    </nav>

                </div>
            </div>
        </div>
        <div class="col-md-6">
            {% include 'admin/temp/dashboard.html' %}
        </div>
        <div class="col">
            <div class="card h-100">
                <div class="card bg-blue">
                    <div class="card-body"></div>
                </div>
                <div class="card-body" style="font-size: 10pt;" id="detail-data">

                    {% include 'admin/temp/card-info.html' %}
                </div>
            </div>
        </div>
    </div>
</div>


{% endblock %}